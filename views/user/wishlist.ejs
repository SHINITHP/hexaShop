<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">




        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
            rel="stylesheet">

        <!-- Css Styles -->
        <!-- Additional CSS Files -->
        <link rel="stylesheet" type="text/css" href="/assets/css/user/bootstrap.min.css">

        <link rel="stylesheet" type="text/css" href="/assets/css/user/font-awesome.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

        <link rel="stylesheet" href="/assets/css/user/templatemo-hexashop.css">

        <link rel="stylesheet" href="/assets/css/user/owl-carousel.css">

        <link rel="stylesheet" href="/assets/css/user/lightbox.css">

        <link rel="stylesheet" href="/assets/css/user/wishlist.css">

        <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
        <title>Document</title>
    </head>

    <body>




        <!-- ***** Header Area Start ***** -->
        <header class="header-area header-sticky" style="position: fixed;">
            <a class='menu-trigger' id="menuTrigger" style="position: relative;">
                <span>Menu</span>
            </a>
            <div class="container Nav-con-1">
                <div class="row row1">
                    <div class="col-10">
                        <nav class="main-nav" style=" margin-left: 20px;">

                            <!-- ***** Logo Start ***** -->
                            <a href="/" class="logo" style="padding: 0;">
                                <img src="/assets/images/logo.png">
                            </a>
                            <!-- ***** Logo End ***** -->
                            <!-- ***** Menu Start ***** -->
                            <ul class="nav">
                                <li class="scroll-to-section"><a href="/#top" class="active">Home</a></li>
                                <li class="scroll-to-section"><a href="/#men">Men's</a></li>
                                <li class="scroll-to-section"><a href="/#women">Women's</a></li>
                                <li class="scroll-to-section"><a href="/#kids">Kid's</a></li>
                                <li class="scroll-to-section"><a href="/#Contact">Contact</a></li>
                            </ul>


                        </nav>


                    </div>
                    <div class="col-2 col2">
                        <a href=""><i class="fa-solid fa-magnifying-glass searchIcon" style="color: #404040;"></i></a>
                        <a href="/shoppingcart">
                            <i class="fa-solid fa-cart-shopping cartIcon" style="color: #404040;"></i>
                        </a>
                        <a href="/Profile" class="profileLogo">
                            <img src="/assets/images/profile-Icon.png" class="profileIcon">
                        </a>
                    </div>
                </div>
            </div>
        </header>
        <!-- ***** Header Area End ***** -->



        <div class="container-fluid outerDiv" id="blur" style="padding: 0px;">
            <div class="container-fluid conF-1">
                <!-- <h3 class="myAccount">My Account</h3> -->
                <div class="row" style="min-height: 100vh;margin-top: 100px;">
                    <div class="col-md-3 col-sm-12 col3">

                        <div class="row"
                            style="display: flex;align-items: center; padding-left: 20px; padding-top: 20px;">
                            <label for="imgInput">
                                <div class="circle">
                                    <img class="profile-pic" id="profilePic"
                                        src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg">
                                </div>
                                <input class="file-upload" id="imgInput" hidden type="file" accept="image/*"
                                    onclick="cropImage('imgInput','profilePic')" />

                            </label>
                            <p>Welcome , Shinith </p>
                        </div>


                        <ul>
                            <a id="changeIcon">
                                <li><i class="fa-regular fa-user menuIcon" style="color: black;"></i><span
                                        class="spanText">Account
                                        Settings</span>
                                    <span>
                                        <i style=" margin-right: 20px;" id="icon" class="fa rightAngle">&#xf107;</i>
                                    </span>
                                </li>
                            </a>


                            <a href="/Profile" id="DropDownLi1" style="display: none;">
                                <li style="padding-left: 50px; height: 50px;">Profile Information <span  style="width: 30px;"><i
                                            style="font-size:24px;color:#494949;padding-left:55px;"
                                            class="fa rightAngle">&#xf105;</i></span></li>
                            </a>

                            <a href="profileMenu?menu=manageAddress" id="DropDownLi2" style="display: none;">
                                <li style="padding-left: 50px;height: 50px;">Manage Address <span style="width: 30px;"><i
                                            style="font-size:24px;color:#494949;padding-left:69px;"
                                            class="fa rightAngle">&#xf105;</i></span></li>
                            </a>



                            <a href="profileMenu?menu=myOrders">
                                <li><i class="fa-solid fa-cart-shopping cartIcon menuIcon"
                                        style="color: black;"></i><span class="spanText">My
                                        Orders</span>
                                    <span>
                                        <i style="font-size:24px;color:#494949;" class="fa rightAngle">&#xf105;</i>
                                    </span>
                                </li>
                            </a>
                            <a href="profileMenu?menu=wishlist">
                                <li style="background-color: #afafaf;"><i class="fa fa-heart menuIcon"
                                        style="color: black;"></i><span class="spanText">Wishlist</span>
                                    <span>
                                        <i style="font-size:24px;color:#494949;" class="fa rightAngle">&#xf105;</i>
                                    </span>
                                </li>
                            </a>
                            <a href="">
                                <li><i class="fa-solid fa-receipt menuIcon" style="color: black;"></i><span
                                        class="spanText">Coupons</span>
                                    <span>
                                        <i style="font-size:24px;color:#494949;" class="fa rightAngle">&#xf105;</i>
                                    </span>
                                </li>
                            </a>
                            <a href="profileMenu?menu=Wallet">
                                <li><i class="fa-solid fa-wallet menuIcon" style="color: #000000;"></i><span
                                        class="spanText">Wallet</span>
                                    <span>
                                        <i style="font-size:24px;color:#494949;" class="fa rightAngle">&#xf105;</i>
                                    </span>
                                </li>
                            </a>
                            <a href="/logout">
                                <li><img src="/assets/images/logout.png" class="logoutImg"><span class="spanText"
                                        style="padding-left: 30px; font-size: 13pt;">Logout</span>
                                    <span>
                                        <i style="font-size:24px;padding-left: 10px; color:#494949;"
                                            class="fa rightAngle">&#xf105;</i>
                                    </span>
                                </li>
                            </a>
                        </ul>
                    </div>
                    <div class="col-md-9 col-sm-12 col9">
                        <h3 style="width: 100%;">Wishlist</h3>
                        <br>
                        <div class="container" style="display: flex;flex-direction: column;min-height: 780px;">
                            <% wishlist.forEach((val)=> { %>
                                <div class="container con2" style="margin-top: 5px;">
                                    <div class="row con2Row1">
                                        <div class="col-2 rowcol6-1">
                                            <img src="<%=val.productID.files[0].url%>" alt="">
                                        </div>
                                        <div class="col-4 rowcol6-2">
                                            <a href="/productOverview?id=<%= val.productID._id %>">
                                                <p>
                                                    <%=val.productID.ProductName%>
                                                </p>
                                            </a>
                                            <ul class="stars">
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 rowcol6-3">
                                            <a href=""><button class="btn" onclick="removeWishlist('<%=val._id%>')"
                                                    id="remove">Remove</button></a>
                                            <a onclick="addToCart('<%= val.productID._id %>')"><button class="btn"
                                                    style="font-size: 11pt;margin-left: 10px;" id="edit">Add To
                                                    Cart</button></a>
                                        </div>
                                    </div>
                                    <div class="row con2Row2">
                                        <div class="col-4 rowcol4-1">
                                            <h5>BrandName</h5>
                                            <p>
                                                <%=val.productID.BrandName%>
                                            </p>
                                        </div>
                                        <div class="col-4 rowcol4-2">
                                            <h5>Availability</h5>
                                            <p>
                                            <%if(val.productID.ProductSize[0].quantity > 0){ %>
                                                In Stock 
                                            <% } else { %>
                                                Out Of Stock
                                            <% } %>
                                        </p>
                                        </div>
                                        <div class="col-4 rowcol4-3">
                                            <h5>Price</h5>
                                            <p>
                                                <%=val.productID.SalesRate%> <span
                                                        style="padding-left: 5px;text-decoration: line-through;">
                                                        <%=val.productID.MRP%>
                                                    </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>
                        </div>
                       


                            <% if(route=='wishlist'){ %> 
                                <div class="col-12 " style="text-align: center;">
                                    <div class="pagination__option">
                                        <% if(currentPage > 1) { %>
                                            <a href="/profileMenu?menu=wishlist&page=<%= currentPage > 1 ? parseInt(currentPage) - 1 : currentPage %>" style="padding-right: 5px;"><i class="fa fa-angle-left"></i></a>
                                        <% } %>
                                        <% for(let i =1; i<= pages; i++) { %>
                                            <% if(i == currentPage) { %>
                                                <a href="/profileMenu?menu=wishlist&page=<%= i %>"><button style="background-color: black;color: white;width: 35px;height: 35px;border: none;border-radius: 5px;"><%= i %></button></a>
                                            <% } else {%>
                                                <a href="/profileMenu?menu=wishlist&page=<%= i %>"><button style="background-color: black;color: white;width: 35px;height: 35px;border: none;border-radius: 5px;"><%= i %></button></a>
                                            <% } %>
                                        <% } %> 
                                        <% if(currentPage < pages ) { %>
                                            <a href="/profileMenu?menu=wishlist&page=<%=parseInt(currentPage) + 1%>" style="padding-left:5px ;"><i class="fa fa-angle-right"></i></a>
                                        <% } %>
                                    </div>
                                </div>
                            <% } else{ %>
                                <div class="col-12 text-align" style="text-align: center;">
                                    <div class="pagination__option">
                                        <% if(currentPage > 1) { %>
                                            <a href=""><i class="fa fa-angle-left"></i></a>
                                        <% } %>
                                        <% for(let i =1; i<= pages; i++) { %>
                                            <% if(i == currentPage) { %>
                                                <a href=""><button style="background-color: black;color: white;width: 35px;height: 35px;border: none;border-radius: 5px;"><%= i %></button></a>
                                            <% } else {%>
                                                <a href=""><button style="background-color: black;color: white;width: 35px;height: 35px;border: none;border-radius: 5px;"><%= i %></button></a>
                                            <% } %>
                                        <% } %>  
                                        <% if(currentPage < pages ) { %>
                                            <a href="" style="padding-left:5px ;"><i class="fa fa-angle-right"></i></a>
                                        <% } %>
                                    </div>
                                </div>
                            <% } %>
                    </div>
                </div>
            </div>
        </div>



        <!-- eFooter starts here... -->
        <%- include('../../views/user/footer.ejs') %>
            <!-- Footer end  here... -->



            <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>  

            <script>
                function removeWishlist(productID) {
                    console.log('req.body.productID', productID)
                    axios.delete('/profileMenu?menu=removeWishlist', {
                        params: {

                            productID: productID
                        }
                    })
                        .then(function (response) {
                            // Redirect to wishlist page after successful removal

                        })
                        .catch(function (error) {
                            console.error('Error removing product from wishlist:', error);
                            // Handle error if needed
                        });
                }



                function addToCart(productID) {
                    axios.post('/profileMenu?task=addToCart', {productID})
                        .then(function (response) {
                            // Redirect to wishlist page after successful removal
                            if(response.data.message==='success'){
                                location.href ='/shoppingCart'
                            }else{
                                Swal.fire({
                                    icon: 'info',
                                    title: '<span style="color: red">Product is Already Exist!</span>',
                                    timer: 4000, // Duration in milliseconds
                                    toast: true,
                                    position: 'top', // Toast position
                                    showConfirmButton: false
                                });
                            }
                            
                        })
                        .catch(function (error) {
                            console.error('Error removing product from wishlist:', error);
                            // Handle error if needed
                        });
                }

            </script>

            <!-- <script src="/assets/js/profile.js">  </script> -->

            <!-- <script src="/assets/js/accountSettings.js"></script> -->

    </body>

    </html>

</body>

</html>